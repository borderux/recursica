<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>React Test - UI Kit Test</title>
  <link rel="stylesheet" href="./dist/ui-kit-test.css">
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      margin: 0;
      padding: 20px;
      background-color: #f5f5f5;
    }

    .container {
      max-width: 800px;
      margin: 0 auto;
      background: white;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    .button-group {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
      margin: 20px 0;
    }

    .section {
      margin: 30px 0;
    }

    h1,
    h2,
    h3 {
      color: #333;
    }

    .info {
      background: #f8f9fa;
      padding: 15px;
      border-radius: 4px;
      margin: 15px 0;
    }

    .code {
      background: #f1f3f4;
      padding: 2px 6px;
      border-radius: 3px;
      font-family: 'Monaco', 'Menlo', monospace;
      font-size: 14px;
    }
  </style>
</head>

<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect } = React

    // Mock the Button component using the CSS classes
    const Button = ({ children, size = "medium", variant = "primary", disabled = false, onClick, className = "", ...props }) => {
      const getSizeClass = () => {
        switch (size) {
          case "small": return "ui-kit-test-buttonSmall"
          case "large": return "ui-kit-test-buttonLarge"
          default: return ""
        }
      }

      const getVariantClass = () => {
        return variant === "secondary" ? "ui-kit-test-buttonSecondary" : ""
      }

      const combinedClassName = [
        "ui-kit-test-button",
        getSizeClass(),
        getVariantClass(),
        className,
      ].filter(Boolean).join(" ")

      return React.createElement("button", {
        className: combinedClassName,
        disabled: disabled,
        onClick: onClick,
        ...props
      }, children)
    }

    // Mock the factory system
    const initializeRecursica = () => {
      window.__RECURSICA__ = {
        tokens: {
          'color/salmon/600': 'var(--color-salmon-600)',
          'color/gray/000': 'var(--color-gray-000)',
          'size/border-radius/default': 'var(--size-border-radius-default)',
          'font/family/lexend': 'var(--font-family-lexend)',
          'size/spacer/1-5x': 'var(--size-spacer-1-5x)',
          'size/spacer/2x': 'var(--size-spacer-2x)',
          'font/size/md': 'var(--font-size-md)',
          'font/weight/medium': 'var(--font-weight-medium)'
        },
        uiKit: {},
        themes: {}
      }
      console.log('âœ… Recursica factory initialized globally')
    }

    const getRecursica = () => {
      if (!window.__RECURSICA__) {
        throw new Error('RecursicaFactory not initialized. Call initialize() first.')
      }
      return window.__RECURSICA__
    }

    // Test App Component
    const TestApp = () => {
      const [clickCount, setClickCount] = useState(0)
      const [recursica, setRecursica] = useState(null)

      useEffect(() => {
        // Initialize Recursica
        initializeRecursica()
        setRecursica(getRecursica())
      }, [])

      const handleClick = () => {
        setClickCount(prev => prev + 1)
        console.log('ðŸ”˜ Button clicked! Count:', clickCount + 1)
        if (recursica) {
          console.log('Current salmon/600 color:', recursica.tokens['color/salmon/600'])
        }
      }

      return (
        <div className="container">
          <h1>ðŸŽ¨ React Test - Recursica UI Kit</h1>
          <p>This demonstrates the ui-kit-test package with React components using salmon/600 background color.</p>

          <div className="section">
            <h2>Interactive Buttons</h2>
            <p>Click count: <span className="code">{clickCount}</span></p>
            <div className="button-group">
              <Button onClick={handleClick}>Click Me!</Button>
              <Button size="small" onClick={handleClick}>Small</Button>
              <Button size="large" onClick={handleClick}>Large</Button>
              <Button disabled>Disabled</Button>
            </div>
          </div>

          <div className="section">
            <h2>Secondary Buttons</h2>
            <div className="button-group">
              <Button variant="secondary" onClick={handleClick}>Secondary</Button>
              <Button variant="secondary" size="small" onClick={handleClick}>Small Secondary</Button>
              <Button variant="secondary" size="large" onClick={handleClick}>Large Secondary</Button>
              <Button variant="secondary" disabled>Disabled Secondary</Button>
            </div>
          </div>

          <div className="section">
            <h2>Design Token Information</h2>
            <div className="info">
              {recursica && (
                <>
                  <p><strong>Salmon/600 Color:</strong> <span className="code">{recursica.tokens['color/salmon/600']}</span></p>
                  <p><strong>Border Radius:</strong> <span className="code">{recursica.tokens['size/border-radius/default']}</span></p>
                  <p><strong>Font Family:</strong> <span className="code">{recursica.tokens['font/family/lexend']}</span></p>
                  <p><strong>Font Size:</strong> <span className="code">{recursica.tokens['font/size/md']}</span></p>
                  <p><strong>Font Weight:</strong> <span className="code">{recursica.tokens['font/weight/medium']}</span></p>
                </>
              )}
            </div>
          </div>

          <div className="section">
            <h2>Factory System Test</h2>
            <div className="info">
              <p>âœ… Factory initialized: {recursica ? 'Yes' : 'No'}</p>
              <p>âœ… Global storage: {window.__RECURSICA__ ? 'Available' : 'Not available'}</p>
              <p>âœ… Token access: {recursica?.tokens ? 'Working' : 'Not working'}</p>
            </div>
          </div>
        </div>
      )
    }

    // Render the app
    ReactDOM.render(<TestApp />, document.getElementById('root'));
  </script>
</body>

</html>